App.Kaelin.Map.creature.restore_all_ap(
  map: App.Kaelin.Map
): App.Kaelin.Map
  let map = NatMap.to_list!(map)
  let new_map = {}
  for pos in map with new_map:
    tile = pos@snd
    coord = pos@fst
    creature = tile@creature

    let new_tile = case creature {
      none:       
        tile
      some:      
        tile@creature <- some(App.Kaelin.Tile.creature.restore_ap(creature.value))
    }

    NatMap.set!(coord, new_tile, new_map)
  
  new_map