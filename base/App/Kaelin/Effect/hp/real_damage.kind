App.Kaelin.Effect.hp.real_damage(
  dmg: I32
  creature: App.Kaelin.Creature
): I32

  open creature
  open creature.hero as hero
  new_hp = I32.max((creature@hp + I32.neg(dmg)) , 0)
  new_hp = I32.min(new_hp, hero.max_hp)
  creature@hp - new_hp
